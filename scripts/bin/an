#!/bin/bash

# あんこ

FUNCTION_PATH=$PRODUCT_DIR/scripts/functions.sh
UTILS_PATH=$PRODUCT_DIR/scripts/utils.sh
source ${FUNCTION_PATH}
source ${UTILS_PATH}



log "Run" "$1 ${*:2}"

cd $PRODUCT_DIR

if grep -e "^function _$1.*{$" $FUNCTION_PATH &> /dev/null
then
  COMMAND=${1:-help}
else
  COMMAND=help
  log "Error" "$1: command no found"
fi

_${COMMAND}_ ${*:2} || (log "Error" "$COMMAND command failed"; exit 1)
